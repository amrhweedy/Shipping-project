<div class="formbold-main-wrapper">
  <div class="formbold-form-wrapper">
    <form [formGroup]="orderForm" (ngSubmit)="UpdateOrder()">
      <div class="formbold-input-wrapp formbold-mb-3">
        <div>
          <div class="formbold-form-div">
            <label class="formbold-form-label">Customer Name</label>
            <input
              type="text"
              formControlName="name"
              name="customerName"
              id="name"
              placeholder="Customer Name"
              class="formbold-form-input"
            />
            <span
              class="text-danger"
              *ngIf="
                orderForm.get('name')?.invalid && orderForm.get('name')?.touched
              "
            >
              Customer Name is required
            </span>
          </div>

          <div class="formbold-form-div">
            <label class="formbold-form-label">Phone Number1</label>

            <input
              type="text"
              formControlName="phone1"
              name="phone1"
              id="phone1"
              placeholder="Phone Number1"
              class="formbold-form-input"
            />
            <span
              class="text-danger"
              *ngIf="
                orderForm.get('phone1')?.invalid &&
                orderForm.get('phone1')?.touched
              "
            >
              Customer Phone1 is required
            </span>
          </div>

          <div class="formbold-form-div">
            <label class="formbold-form-label">Phone Number2</label>

            <input
              type="text"
              formControlName="phone2"
              name="phone2"
              id="phone2"
              placeholder="Phone Number2"
              class="formbold-form-input"
            />
            <span
              class="text-danger"
              *ngIf="
                orderForm.get('phone2')?.invalid &&
                orderForm.get('phone2')?.touched
              "
            >
              Customer Phone2 is required
            </span>
          </div>
        </div>
      </div>

      <div class="formbold-input-wrapp formbold-mb-3">
        <div>
          <div class="formbold-form-div">
            <label class="formbold-form-label">Email</label>

            <input
              type="text"
              formControlName="email"
              name="email"
              id="email"
              placeholder="Email"
              class="formbold-form-input"
            />
            <span
              class="text-danger"
              *ngIf="
                orderForm.get('email')?.invalid &&
                orderForm.get('email')?.touched
              "
            >
              Please Enter a valid Email
            </span>
          </div>
          <div class="formbold-form-div">
            <label class="formbold-form-label">Government</label>
            <select
              class="formbold-form-input"
              name="government"
              id="government"
              formControlName="government"
              (change)="onGovernmentChange($event)"
            >
              <option
                *ngFor="let government of governments"
                [value]="government"
              >
                {{ government }}
              </option>
            </select>
            <span
              class="text-danger"
              *ngIf="
                orderForm.get('government')?.invalid &&
                orderForm.get('government')?.touched
              "
            >
              Government is Required
            </span>
          </div>
          <div class="formbold-form-div">
            <label class="formbold-form-label">City</label>
            <select
              class="formbold-form-input"
              name="city"
              id="city"
              formControlName="city"
              [disabled]="isCityDisabled()"
            >
              <option *ngFor="let city of cities" [value]="city">
                {{ city }}
              </option>
            </select>
            <span
              class="text-danger"
              *ngIf="
                orderForm.get('city')?.invalid && orderForm.get('city')?.touched
              "
            >
              City is Required
            </span>
          </div>
        </div>
      </div>

      <div class="formbold-input-wrapp formbold-mb-3">
        <div>
          <div class="formbold-form-div">
            <label class="formbold-form-label">Street & Village </label>
            <input
              type="text"
              name="stvillage"
              id="stvillage"
              formControlName="village"
              placeholder="Street & Village"
              class="formbold-form-input"
            />
          </div>
          <div class="formbold-form-div">
            <label class="formbold-form-label">Village Delivery </label>
            <mat-slide-toggle
              class="formbold-form-input ms-2"
              color="primary"
              formControlName="villageDeliverd"
              (change)="onVillageDeliveryToggle($event)"
            >
            </mat-slide-toggle>
          </div>
            <div class="formbold-form-div">
            <label class="formbold-form-label">Village Cost</label>
            <input
              type="number"
              name="stvillage"
              id="stvillage"
              formControlName="deliverToVillageCost"
              placeholder="Village Cost"
              class="formbold-form-input"
            />
          </div>
        </div>
      </div>

      <div class="formbold-input-wrapp formbold-mb-3">
        <div>
          <div class="formbold-form-div">
            <label class="formbold-form-label">Shipping Type</label>
            <select
              class="formbold-form-input"
              name="shippingType"
              id="shippingType"
              formControlName="shippingType"
            >
              <option *ngFor="let state of shippingTypes" [value]="state">
                {{ state }}
              </option>
            </select>
            <span
              class="text-danger"
              *ngIf="
                orderForm.get('shippingType')?.invalid &&
                orderForm.get('shippingType')?.touched
              "
            >
              Shipping Type is Required
            </span>
          </div>
          <div class="formbold-form-div">
            <label class="formbold-form-label">Payment Method</label>
            <select
              class="formbold-form-input"
              name="paymentType"
              id="paymentType"
              formControlName="paymentType"
            >
              <option *ngFor="let method of paymentMethods" [value]="method">
                {{ method }}
              </option>
            </select>
            <span
              class="text-danger"
              *ngIf="
                orderForm.get('paymentType')?.invalid &&
                orderForm.get('paymentType')?.touched
              "
            >
              Payment Method is Required
            </span>
          </div>
          <div class="formbold-form-div">
            <label class="formbold-form-label">Branch</label>
            <select
              class="formbold-form-input"
              name="branch"
              id="branch"
              formControlName="branch"
            >
              <option *ngFor="let branch of branches" [value]="branch">
                {{ branch }}
              </option>
            </select>
            <span
              class="text-danger"
              *ngIf="
                orderForm.get('branch')?.invalid &&
                orderForm.get('branch')?.touched
              "
            >
              Branch is Required
            </span>
          </div>
        </div>
      </div>

      <div class="formbold-input-wrapp formbold-mb-3">
        <h1 class="mx-3 my-5">Products</h1>
        <div>
          <table class="table text-center">
            <thead class="table-light">
              <tr>
                <th class="equal-width-cell">
                  <a
                    class="btn bg-blue text-light px-5 py-2"
                    (click)="addRow()"
                  >
                    Add product
                  </a>
                </th>
                <th class="equal-width-cell">Product Name</th>
                <th class="equal-width-cell">Quantity</th>
                <th class="equal-width-cell">Price</th>
                <th class="equal-width-cell">Weight</th>
                <th class="equal-width-cell">Delete</th>
              </tr>
            </thead>
            <tbody
              formArrayName="products"
              *ngFor="let row of rows; let i = index"
            >
              <tr [formGroupName]="i">
                <td></td>
                <td>
                  <div class="formbold-form-div">
                    <input
                      type="text"
                      formControlName="productName"
                      placeholder="Product Name"
                      class="formbold-form-input"
                    />
                    <span
                      class="text-danger"
                      *ngIf="
                        orderForm.get('productName')?.invalid &&
                        orderForm.get('productName')?.touched
                      "
                    >
                      Product Name is Required
                    </span>
                  </div>
                </td>
                <td>
                  <div class="formbold-form-div">
                    <input
                      type="number"
                      formControlName="quantity"
                      placeholder="Quantity"
                      class="formbold-form-input"
                      (input)="subscribeToProductChanges()"
                    />
                    <span
                      class="text-danger"
                      *ngIf="
                        orderForm.get('quantity')?.invalid &&
                        orderForm.get('quantity')?.touched
                      "
                    >
                      Quantity is Required
                    </span>
                  </div>
                </td>
                <td>
                  <div class="formbold-form-div">
                    <input
                      type="number"
                      formControlName="price"
                      placeholder="Price"
                      class="formbold-form-input"
                      (input)="subscribeToProductChanges()"
                    />
                    <span
                      class="text-danger"
                      *ngIf="
                        orderForm.get('price')?.invalid &&
                        orderForm.get('price')?.touched
                      "
                    >
                      Price is Required
                    </span>
                  </div>
                </td>
                <td>
                  <div class="formbold-form-div">
                    <input
                      type="number"
                      formControlName="weight"
                      placeholder="Weight"
                      class="formbold-form-input"
                      (input)="subscribeToProductChanges()"
                    />
                    <span
                      class="text-danger"
                      *ngIf="
                        orderForm.get('weight')?.invalid &&
                        orderForm.get('weight')?.touched
                      "
                    >
                      Weight is Required
                    </span>
                  </div>
                </td>
                <td>
                  <button class="btn text-danger" (click)="deleteRow(i)">
                    <i class="bi bi-trash3-fill"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="formbold-input-wrapp formbold-mb-3">
        <div>
          <div class="formbold-form-div">
            <label class="formbold-form-label">Total Cost</label>
            <input
              type="text"
              name="totalcost"
              id="totalcost"
              formControlName="totalcost"
              placeholder="Total Cost"
              class="formbold-form-input"
              [ngModel]="orderForm.get('totalcost')?.value"
            />
            <span
              class="text-danger"
              *ngIf="
                orderForm.get('totalcost')?.invalid &&
                orderForm.get('totalcost')?.touched
              "
            >
              Total Cost is Required
            </span>
          </div>
          <div class="formbold-form-div">
            <label class="formbold-form-label">Total Weight</label>
            <input
              type="text"
              name="totalweight"
              formControlName="totalweight"
              id="totalweight"
              placeholder="Total Weight"
              class="formbold-form-input"
              [ngModel]="orderForm.get('totalweight')?.value"
            />
            <span
              class="text-danger"
              *ngIf="
                orderForm.get('totalweight')?.invalid &&
                orderForm.get('totalweight')?.touched
              "
            >
              Total Weight is Required
            </span>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-center">
        <button class="btn text-light py-2 fw-bold bg-blue w-50" type="submit">
          Edit
        </button>
      </div>
    </form>
  </div>
</div>
